box: python:2.7-slim
dev:
  steps:
    - pip-install
    - internal/watch:
        code: python app.py
        reload: true
build:
  steps:
    - script:
        name: set pip cache dir 
        code: |
          mkdir -p $WERCKER_CACHE_DIR/pip-download-cache
          mkdir -p $WERCKER_CACHE_DIR/pip-wheels
          export PIP_DOWNLOAD_CACHE=$WERCKER_CACHE_DIR/pip-download-cache 
          export PIP_WHEEL_DIR=$WERCKER_CACHE_DIR/pip-wheels
          ls -lah $WERCKER_CACHE_DIR
    - pip-install
    - script:
        name: ls -lah ~/.cache/pip
        code: ls -lah ~/.cache/pip
    - script:
        name: env
        code: env
    - script:
        name: python unit test
        code : |
          python app_test.py
